{"version":3,"sources":["./src/app/portal/reports/reports.routing.ts","./src/app/portal/reports/container/reports.component.ts","./src/app/portal/reports/container/reports.component.html","./src/app/portal/reports/reports.module.ts"],"names":[],"mappings":"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","file":"reports-reports-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ReportsComponent } from './container/reports.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReportsComponent,\n  }\n];\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class ReportsRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ModalDismissReasons, NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Observable } from 'rxjs';\nimport { BookingsReport, Individual } from 'src/app/models/BookingsReport';\nimport { AdministratorService } from 'src/app/services/administrator-service/administrator.service';\n\n@Component({\n  selector: 'app-reports',\n  templateUrl: './reports.component.html',\n  styleUrls: ['./reports.component.scss']\n})\nexport class ReportsComponent implements OnInit {\n  \n  form: FormGroup;\n  showLoader: boolean;\n  bookingReports$:Observable<any>;\n  bookingReportsData:Individual[];\n  closeModal: string;\n  constructor(private administratorService: AdministratorService,\n              private modalService: NgbModal) { }\n\n  ngOnInit(): void {\n    this.form = new FormGroup({\n      bookingEndDates: new FormControl('', [Validators.required]),\n      bookingStartDates: new FormControl('', [Validators.required])\n      \n    });\n  }\n\n  get bookingEndDates() {\n    return this.form.get('bookingEndDates');\n  }\n\n  get bookingStartDates() {\n    return this.form.get('bookingStartDates');\n  }\n\n  showLoaders(){\n    this.showLoader = true\n  }\n\n  disableLoaders(){\n    this.showLoader = false\n  }\n\n\n  submitForm(){\n    if(this.form.invalid){\n      return this.form.markAllAsTouched();\n    }\n    this.showLoaders();\n\n    this.bookingReports$ = this.administratorService.GetBookingsReports(this.form.value.bookingStartDates, \n                      this.form.value.bookingEndDates, \"1\", \"60\");\n                      this.bookingReports$.subscribe(res => console.log(res))\n                      \n    this.disableLoaders(); \n                  \n  }\n\n  viewIndividualData(bookingReport: BookingsReport){\n    console.log(bookingReport)\n  }\n\n  triggerModal(content, bookingReport: BookingsReport) {\n\n    this.bookingReportsData = bookingReport.individuals\n    this.modalService.open(content, {centered: true,backdrop: 'static'}).result.then((res) => {\n      this.closeModal = `Closed with: ${res}`;\n    }, (res) => {\n      this.closeModal = `Dismissed ${this.getDismissReason(res)}`;\n    });\n  }\n\n  private getDismissReason(reason: any): string {\n    if (reason === ModalDismissReasons.ESC) {\n      return 'by pressing ESC';\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\n      return 'by clicking on a backdrop';\n    } else {\n      return  `with: ${reason}`;\n    }\n  }\n}\n","<div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n    <h1 class=\"h2\">Reports</h1>\n  </div>\n\n  <div class=\"view-portfolio\">\n    <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col-md-12\">\n            <div class=\"card\">\n              <div class=\"card-header card-header-primaryW\">\n                <h2 class=\"card-title\">Bookings Reports</h2>\n                <p class=\"card-category\">Get booking reports</p>\n              </div>\n              <div class=\"card-body\">\n                <form method=\"POST\" [formGroup]=\"form\" (ngSubmit)=\"submitForm()\" >\n\n                      <div class=\"row pd-10\">\n                        <div class=\"col-md-12\">\n                          <div class=\"form-group\">\n                            <label class=\"bmd-label-floating\">Booking Start Date</label>\n                            <input type=\"date\" formControlName=\"bookingStartDates\" class=\"form-control\">\n                            <div class=\"small alert alert-danger\" *ngIf=\"bookingStartDates.touched && bookingStartDates.invalid\">\n                                <span *ngIf=\"!!bookingStartDates.errors.required\">please select booking start date</span>\n                                </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div class=\"row pd-10\">\n                        <div class=\"col-md-12\">\n                          <div class=\"form-group\">\n                            <label class=\"bmd-label-floating\">Booking End Date</label>\n                            <input type=\"date\" formControlName=\"bookingEndDates\" class=\"form-control\">\n                            <div class=\"small alert alert-danger\" *ngIf=\"bookingEndDates.touched && bookingEndDates.invalid\">\n                                <span *ngIf=\"!!bookingEndDates.errors.required\">please select booking end date</span>\n                                </div>\n                          </div>\n                        </div>\n                      </div>\n\n                  <button class=\"btn btn-primary pull-right pd-10\">\n                    Get Report\n                    <i class=\"fa fa-spinner fa-spin fs-22 float-r\" *ngIf=\"showLoader\"></i>\n                  </button>\n                  <div class=\"clearfix\"></div>\n                </form>\n\n                <div class=\"row pd-10\" *ngIf=\"bookingReports$ != null\">\n                    <div class=\"col-md-12\">\n                        <table class=\"table\">\n                            <thead class=\"thead-dark\">\n                              <tr>\n                                <th scope=\"col\">Booking Dates</th>\n                                <th scope=\"col\">Total Space Allocated</th>\n                                <th scope=\"col\">Total capacity</th>\n                                <th scope=\"col\">Location</th>\n                              </tr>\n                            </thead>\n                            <tbody>\n                              <tr *ngFor=\"let bookingReport of bookingReports$ | async\">\n                                <td>{{bookingReport.bookingDates | date}}</td>\n                                <td>{{bookingReport.capacity}}</td>\n                                <td>{{bookingReport.spaceAllocated}}</td>\n                                <td>{{bookingReport.location.locationName}}</td>\n                                <td>\n                                    <button class=\"btn btn-primary pull-right pd-3 mg-5\" (click)=\"triggerModal(modalData, bookingReport)\">\n                                        View booked Individual data\n                                        <i class=\"fa fa-spinner fa-spin fs-22 float-r\" *ngIf=\"showLoader\"></i>\n                                      </button>\n                                </td>\n                              </tr>\n                          </table>\n                          \n                    </div>\n                  </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  </div>\n\n    <ng-template #modalData let-modal>\n        <div class=\"modal-header\">\n          <h4 class=\"modal-title\" id=\"modal-basic-title\">Booking Informations</h4>\n          <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\n            <span aria-hidden=\"true\">×</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n            <div *ngIf=\"bookingReportsData.length == 0\">\n                <label class=\"bmd-label-floating\">No booking was placed on this date</label>\n            </div>\n            <div class=\"row pd-10\" *ngIf=\"bookingReportsData.length > 0\">\n                <div class=\"col-md-12\">\n                    <table class=\"table\">\n                        <thead class=\"thead-dark\">\n                          <tr>\n                            <th scope=\"col\">First Name</th>\n                            <th scope=\"col\">Last Name</th>\n                            <th scope=\"col\">Email Adress</th>\n                            <th scope=\"col\">Mobile Number</th>\n                            <th scope=\"col\">Test Type</th>\n                            <th scope=\"col\">Test Outcome</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr *ngFor=\"let individual of bookingReportsData\">\n                            <td>{{individual?.individualFirstName}}</td>\n                            <td>{{individual?.individualLastName}}</td>\n                            <td>{{individual?.individualEmailAddress}}</td>\n                            <td>{{individual?.individualMobileNumber}}</td>\n                            <td>{{individual?.individualLab.testType}}</td>\n                            <td>{{individual?.individualLab.testOutCome}}</td>\n                          </tr>\n                      </table>\n                      \n                </div>\n              </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-danger\" (click)=\"modal.close('Save click')\">Close</button>\n        </div>\n      </ng-template>\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReportsRoutingModule } from './reports.routing';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ReportsComponent } from './container/reports.component';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\n\n\n@NgModule({\n  declarations: [ReportsComponent],\n  imports: [\n    ReportsRoutingModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    NgbModule\n  ]\n})\nexport class ReportsModule { }\n"],"sourceRoot":"webpack:///"}